<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Normalization Simulator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Database Normalization Simulator</h1>
            <p class="subtitle">Compare Normalized vs Denormalized Database Performance</p>
            <p class="description">
                This interactive simulator demonstrates the performance differences between normalized and denormalized
                database schemas under OLTP (transactional) and OLAP (analytical) workloads using a fast food ordering scenario.
            </p>
        </header>

        <!-- Tab Navigation System -->
        <section class="tab-navigation">
            <div class="tab-header">
                <button class="tab-nav-button active" onclick="showTab('overview')">
                    <span class="tab-icon">üè†</span>
                    <span class="tab-text">Overview</span>
                </button>
                <button class="tab-nav-button" onclick="showTab('data')">
                    <span class="tab-icon">üóÉÔ∏è</span>
                    <span class="tab-text">Data & APIs</span>
                </button>
                <button class="tab-nav-button" onclick="showTab('schema')">
                    <span class="tab-icon">üìã</span>
                    <span class="tab-text">Schema Explorer</span>
                </button>
            </div>

            <!-- Tab Content Sections -->
            <div class="tab-content">

                <!-- Overview Tab -->
                <div class="tab-panel active" id="overview">
                    <div class="welcome-section">
                        <h2>Welcome to Database Normalization Simulator</h2>
                        <p class="welcome-text">
                            This interactive tool demonstrates the performance differences between normalized and denormalized
                            database schemas using a fast food chain ordering scenario. Perfect for understanding database
                            design principles in educational settings.
                        </p>

                        <div class="quick-stats">
                            <div class="stat-card">
                                <div class="stat-number">80+</div>
                                <div class="stat-label">Sample Orders</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">4</div>
                                <div class="stat-label">Store Locations</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">2</div>
                                <div class="stat-label">Schema Types</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">OLTP/OLAP</div>
                                <div class="stat-label">Workload Modes</div>
                            </div>
                        </div>

                        <div class="getting-started">
                            <h3>üöÄ Getting Started</h3>
                            <p>Choose a section above to explore different aspects of the simulation:</p>
                            <ul class="feature-list">
                                <li><strong>Data & APIs:</strong> Run simulations and view performance comparisons</li>
                                <li><strong>Analytics:</strong> Explore query results and performance metrics</li>
                                <li><strong>Schema Explorer:</strong> Examine database structure and sample data</li>
                                <li><strong>About:</strong> Learn about database design principles</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Data & APIs Tab -->
                <div class="tab-panel" id="data">
                    <div class="simulation-section">
                        <h2>Database Performance Simulations</h2>
                        <p class="section-description">
                            Run interactive simulations to compare normalized vs denormalized database performance
                            under different workload conditions.
                        </p>

                        <div class="unified-simulation-section">
                            <h3>üöÄ Database Performance Simulations</h3>
                            <p class="section-description">
                                Compare normalized and denormalized database performance across different workload types.
                            </p>

                            <div class="simulation-grid">
                                <!-- OLTP Section -->
                                <div class="workload-section">
                                    <div class="workload-header">
                                        <h4>üìù Transactional (OLTP)</h4>
                                        <p class="workload-subtitle">Write-heavy operations</p>
                                    </div>
                                    <div class="schema-comparison">
                                        <button class="sim-button normalized" onclick="runSimulation('oltp', 'normalized')">
                                            <span class="button-icon">üèóÔ∏è</span>
                                            <span class="button-text">
                                                <strong>Normalized</strong><br>
                                                <small>3NF Schema</small>
                                            </span>
                                        </button>
                                        <button class="sim-button denormalized" onclick="runSimulation('oltp', 'denormalized')">
                                            <span class="button-icon">‚ö°</span>
                                            <span class="button-text">
                                                <strong>Denormalized</strong><br>
                                                <small>Flat Schema</small>
                                            </span>
                                        </button>
                                    </div>
                                </div>

                                <!-- OLAP Section -->
                                <div class="workload-section">
                                    <div class="workload-header">
                                        <h4>üìä Analytical (OLAP)</h4>
                                        <p class="workload-subtitle">Read-heavy operations</p>
                                    </div>
                                    <div class="schema-comparison">
                                        <button class="sim-button normalized" onclick="runSimulation('olap', 'normalized')">
                                            <span class="button-icon">üèóÔ∏è</span>
                                            <span class="button-text">
                                                <strong>Normalized</strong><br>
                                                <small>3NF Schema</small>
                                            </span>
                                        </button>
                                        <button class="sim-button denormalized" onclick="runSimulation('olap', 'denormalized')">
                                            <span class="button-icon">‚ö°</span>
                                            <span class="button-text">
                                                <strong>Denormalized</strong><br>
                                                <small>Flat Schema</small>
                                            </span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analytics Tab -->
                <div class="tab-panel" id="analytics">
                    <div class="analytics-section">
                        <h2>Performance Analytics Dashboard</h2>
                        <p class="section-description">
                            View detailed analytics and performance comparisons from previous simulation runs.
                        </p>

                        <div class="analytics-placeholder">
                            <div class="placeholder-content">
                                <span class="placeholder-icon">üìà</span>
                                <h3>Run Simulations to View Analytics</h3>
                                <p>Use the "Data & APIs" tab to run simulations and generate performance analytics.</p>
                                <button class="cta-button" onclick="showTab('data')">Go to Simulations</button>
                            </div>
                        </div>

                        <!-- Analytics Results Container (populated dynamically) -->
                        <div class="analytics-content" style="display: none;">
                            <!-- Content populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Schema Explorer Tab -->
                <div class="tab-panel" id="schema">
                    <div class="schema-section">
                        <h2>Database Schema Explorer</h2>
                        <p class="section-description">
                            Explore the structure and relationships of both normalized and denormalized database schemas.
                        </p>

                        <div class="schema-tabs">
                            <button class="schema-tab-button active" onclick="showSchemaView('normalized')">Normalized Schema (3NF)</button>
                            <button class="schema-tab-button" onclick="showSchemaView('denormalized')">Denormalized Schema</button>
                        </div>

                        <div class="schema-view-content">
                            <!-- Normalized Schema View -->
                            <div class="schema-view active" id="normalizedView">
                                <div class="schema-description">
                                    <h3>Normalized Schema (3NF)</h3>
                                    <p>Follows normalization principles with minimal data redundancy and proper relationships.</p>
                                </div>
                                <div class="tables-container">
                                    <!-- Tables will be populated by JavaScript -->
                                </div>
                            </div>

                            <!-- Denormalized Schema View -->
                            <div class="schema-view" id="denormalizedView" style="display: none;">
                                <div class="schema-description">
                                    <h3>Denormalized Schema</h3>
                                    <p>Combines multiple entities for optimized read performance with redundant data.</p>
                                </div>
                                <div class="tables-container">
                                    <!-- Tables will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- About Tab -->
                <div class="tab-panel" id="about">
                    <div class="about-section">
                        <h2>About Database Normalization</h2>
                        <p class="section-description">
                            Learn about database design principles and the trade-offs between different schema approaches.
                        </p>

                        <div class="education-cards">
                            <div class="education-card">
                                <h3>üóÑÔ∏è Database Normalization</h3>
                                <p>Process of organizing data to minimize redundancy and improve data integrity through normal forms (1NF, 2NF, 3NF, BCNF).</p>
                                <div class="pros-cons">
                                    <div class="pros">
                                        <strong>Advantages:</strong>
                                        <ul>
                                            <li>Eliminates data redundancy</li>
                                            <li>Improves data consistency</li>
                                            <li>Better ACID compliance</li>
                                            <li>Easier to maintain and update</li>
                                        </ul>
                                    </div>
                                    <div class="cons">
                                        <strong>Considerations:</strong>
                                        <ul>
                                            <li>Complex queries with JOINs</li>
                                            <li>Potentially slower reads</li>
                                            <li>More tables to manage</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="education-card">
                                <h3>‚ö° Database Denormalization</h3>
                                <p>Process of combining tables to improve read performance by adding redundant data and reducing the need for JOINs.</p>
                                <div class="pros-cons">
                                    <div class="pros">
                                        <strong>Advantages:</strong>
                                        <ul>
                                            <li>Faster query performance</li>
                                            <li>Simplified query structure</li>
                                            <li>Better for read-heavy workloads</li>
                                            <li>Reduced query complexity</li>
                                        </ul>
                                    </div>
                                    <div class="cons">
                                        <strong>Considerations:</strong>
                                        <ul>
                                            <li>Data redundancy</li>
                                            <li>Update anomalies</li>
                                            <li>Larger storage requirements</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- Results Section -->
        <section class="results-section" id="resultsSection" style="display: none;">
            <h2>Simulation Results</h2>

            <!-- Performance Metrics -->
            <div class="metrics-container">
                <div class="metric-card">
                    <h3>Execution Time</h3>
                    <div class="metric-comparison">
                        <div class="metric-item normalized">
                            <span class="label">Normalized:</span>
                            <span class="value" id="normalizedTime">-</span>
                        </div>
                        <div class="metric-item denormalized">
                            <span class="label">Denormalized:</span>
                            <span class="value" id="denormalizedTime">-</span>
                        </div>
                    </div>
                </div>

                <div class="metric-card">
                    <h3>Performance Difference</h3>
                    <div class="performance-diff" id="performanceDiff">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Schema Comparison -->
            <div class="schema-comparison">
                <div class="schema-panel">
                    <h3>Normalized Schema</h3>
                    <div class="schema-info">
                        <p><strong>Structure:</strong> <span id="normalizedStructure">-</span></p>
                        <p><strong>Tables:</strong> <span id="normalizedTables">-</span></p>
                        <p><strong>Query:</strong> <span id="normalizedQuery">-</span></p>
                    </div>
                    <div class="results-container">
                        <h4>Results</h4>
                        <div class="results-table" id="normalizedResults">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="schema-panel">
                    <h3>Denormalized Schema</h3>
                    <div class="schema-info">
                        <p><strong>Structure:</strong> <span id="denormalizedStructure">-</span></p>
                        <p><strong>Tables:</strong> <span id="denormalizedTables">-</span></p>
                        <p><strong>Query:</strong> <span id="denormalizedQuery">-</span></p>
                    </div>
                    <div class="results-container">
                        <h4>Results</h4>
                        <div class="results-table" id="denormalizedResults">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chart Visualization -->
            <div class="chart-container">
                <div class="chart-header">
                    <h3>Performance Comparison</h3>
                    <div class="chart-legend">
                        <div class="legend-item">
                            <span class="legend-color normalized"></span>
                            <span class="legend-text">Normalized Schema</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color denormalized"></span>
                            <span class="legend-text">Denormalized Schema</span>
                        </div>
                    </div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="performanceChart" width="800" height="400"></canvas>
                </div>
            </div>

            <!-- Educational Summary -->
            <div class="educational-summary">
                <h3>üìö Key Takeaways</h3>
                <div class="summary-grid">
                    <div class="summary-card normalized">
                        <h4>‚úÖ Normalized Schema Advantages</h4>
                        <ul>
                            <li><strong>Data Integrity:</strong> Eliminates data redundancy and anomalies</li>
                            <li><strong>ACID Compliance:</strong> Better support for transactions</li>
                            <li><strong>Storage Efficiency:</strong> Minimal data duplication</li>
                            <li><strong>Update Flexibility:</strong> Single point of truth for modifications</li>
                            <li><strong>Referential Integrity:</strong> Foreign key constraints ensure consistency</li>
                        </ul>
                    </div>

                    <div class="summary-card denormalized">
                        <h4>‚ö° Denormalized Schema Advantages</h4>
                        <ul>
                            <li><strong>Query Performance:</strong> Faster reads with no JOINs required</li>
                            <li><strong>Simplified Queries:</strong> Direct access to all needed data</li>
                            <li><strong>Analytics Optimization:</strong> Pre-aggregated data for reporting</li>
                            <li><strong>Reduced Complexity:</strong> Fewer tables to manage</li>
                            <li><strong>Read-Heavy Optimization:</strong> Ideal for OLAP workloads</li>
                        </ul>
                    </div>
                </div>

                <div class="workload-analysis">
                    <h4>üéØ Workload Recommendations</h4>
                    <div class="workload-cards">
                        <div class="workload-card oltp">
                            <h5>OLTP (Transactional)</h5>
                            <p><strong>Best Choice:</strong> Normalized Schema</p>
                            <p>Frequent writes, updates, and deletes require data integrity and ACID properties.</p>
                        </div>
                        <div class="workload-card olap">
                            <h5>OLAP (Analytical)</h5>
                            <p><strong>Best Choice:</strong> Denormalized Schema</p>
                            <p>Complex analytical queries benefit from pre-joined data and faster reads.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Loading Indicator -->
        <div class="loading" id="loading" style="display: none;">
            <div class="spinner"></div>
            <p>Running simulation...</p>
        </div>

        <!-- Tables Modal -->
        <div class="modal" id="tablesModal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Database Schema Explorer</h2>
                    <button class="modal-close" onclick="closeTablesModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="schema-tabs">
                        <button class="tab-button active" onclick="showSchema('normalized')">Normalized Schema (3NF)</button>
                        <button class="tab-button" onclick="showSchema('denormalized')">Denormalized Schema</button>
                    </div>

                    <div class="schema-content" id="normalizedSchema">
                        <div class="schema-description">
                            <h3>Normalized Schema (3NF)</h3>
                            <p>Follows normalization principles with minimal data redundancy and proper relationships.</p>
                        </div>
                        <div class="tables-container">
                            <!-- Tables will be populated by JavaScript -->
                        </div>
                    </div>

                    <div class="schema-content" id="denormalizedSchema" style="display: none;">
                        <div class="schema-description">
                            <h3>Denormalized Schema</h3>
                            <p>Combines multiple entities for optimized read performance with redundant data.</p>
                        </div>
                        <div class="tables-container">
                            <!-- Tables will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Schema Information -->
        <section class="info-section">
            <div class="info-panel">
                <h3>Normalized Schema (3NF)</h3>
                <ul>
                    <li><strong>Advantages:</strong> Data integrity, minimal redundancy, flexible updates</li>
                    <li><strong>Disadvantages:</strong> Complex joins, slower reads, more tables</li>
                    <li><strong>Best for:</strong> OLTP operations (frequent writes)</li>
                </ul>
                <div class="schema-tables">
                    <h4>Tables:</h4>
                    <ul>
                        <li><code>customers</code> - Customer information</li>
                        <li><code>stores</code> - Store locations and details</li>
                        <li><code>employees</code> - Staff information</li>
                        <li><code>menu_items</code> - Available food items</li>
                        <li><code>orders</code> - Order headers</li>
                        <li><code>order_items</code> - Individual order line items</li>
                    </ul>
                </div>
            </div>

            <div class="info-panel">
                <h3>Denormalized Schema</h3>
                <ul>
                    <li><strong>Advantages:</strong> Faster reads, simpler queries, better for analytics</li>
                    <li><strong>Disadvantages:</strong> Data redundancy, update anomalies, larger storage</li>
                    <li><strong>Best for:</strong> OLAP operations (complex reads)</li>
                </ul>
                <div class="schema-tables">
                    <h4>Tables:</h4>
                    <ul>
                        <li><code>denormalized_orders</code> - Combined order data</li>
                        <li><code>denormalized_analytics</code> - Pre-aggregated analytics data</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>

    <script src="app.js"></script>
</body>
</html>